{"version":3,"sources":["Persons.js","services/persons.js","services/error.js","services/success.js","App.js","index.js"],"names":["Persons","props","allPeople","persons","map","person","react_default","a","createElement","name","number","onClick","remove","id","baseUrl","services_persons","axios","get","then","response","data","newObject","post","put","concat","delete","Error","_ref","message","className","Success","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","exclusion","setExclusion","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","successMessage","setSuccessMessage","useEffect","personService","initialPersons","filteredSearch","filter","toLowerCase","includes","error","success","value","onChange","event","target","onSubmit","preventDefault","personObject","alreadyFound","find","window","confirm","console","log","p","returnedNote","setTimeout","type","src_Persons","deletedPerson","r","catch","err","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ed3e2623.chunk.js","sourcesContent":["import React from \"react\"\r\n\r\nconst Persons = (props) => {\r\n\r\n    const allPeople = props.persons.map(person => <div>{person.name} {person.number} <button onClick={() => props.remove(person.id)}>poista</button></div>)\r\n    return (\r\n        <div>{allPeople}</div>\r\n    )\r\n}\r\n\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from \"react\"\r\n\r\nconst Error = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"error\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error","import React from \"react\"\r\n\r\nconst Success = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"success\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Success","import React, { useState, useEffect } from 'react'\r\nimport Person from \"./Persons\"\r\nimport personService from './services/persons'\r\nimport Error from './services/error'\r\nimport Success from './services/success'\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons ] = useState([])\r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newNumber, setNewNumber ] = useState()\r\n    const [ exclusion, setExclusion ] = useState('')\r\n    const [ errorMessage, setErrorMessage ] = useState(null)\r\n    const [ successMessage, setSuccessMessage ] = useState(null)\r\n    \r\n    useEffect(() => {\r\n        personService\r\n            .getAll()\r\n            .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n            })\r\n    }, [])\r\n\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n\r\n        // object entry for person entries\r\n        const personObject = { name: newName, number: newNumber }\r\n\r\n        // check if user entered entry already exists in db\r\n        const alreadyFound = persons.find(persons => persons.name === newName)\r\n\r\n        if (alreadyFound) {\r\n            // confirm if user wants to replace the number of an already existing entry\r\n            const wantToReplace = window.confirm(`${newName} löytyy jo, haluatko korvata nykyisen?`)\r\n\r\n            // code under executes if user agreed to replacing person\r\n            if (wantToReplace) {\r\n                personService.update(alreadyFound.id, personObject).then(response => {\r\n                    console.log(response)\r\n                    setPersons(persons.filter(p => p.name !== personObject.name)\r\n                    .concat(response))\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                })\r\n            }\r\n        } else {\r\n            personService\r\n                .create(personObject).then(returnedNote => {\r\n                // add person to db.json\r\n                setPersons(persons.concat(returnedNote))\r\n\r\n                // clear up input fields\r\n                setNewName('')\r\n                setNewNumber('')\r\n\r\n                // display add message\r\n                setSuccessMessage(`${personObject.name} on lisätty`)\r\n                setTimeout(() => {\r\n                    setSuccessMessage(null)\r\n                }, 3000)\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleRemove = (id) => {\r\n        // collect users selected object for deletion\r\n        const deletedPerson = persons.find(person => person.id === id)\r\n\r\n        // confirm deletion\r\n        const accepted = window.confirm(`remove ${deletedPerson.name} are you sure?`)\r\n\r\n        // code under executes if user agreed to deleting person entry\r\n        if (accepted) {\r\n            personService.remove(id).then(r => {\r\n                console.log(r)\r\n                setPersons(persons.filter(person => person.id !== id))\r\n            }).catch(err => { // if promise cannot be filled properly\r\n                setErrorMessage(`henkilö '${newName}' on jo poistettu palvelimelta`)\r\n                setTimeout(() => {\r\n                    setErrorMessage(null)\r\n                }, 3000)\r\n                setPersons(persons.filter(person => person.id !==id))\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleExclusion = (event) => {\r\n        setExclusion(event.target.value)\r\n    }\r\n\r\n    const filteredSearch = exclusion ? persons.filter(person => person.name.toLowerCase().includes(exclusion.toLowerCase())) : persons\r\n\r\n    return (\r\n        <div>\r\n            <h2>Puhelinluettelo</h2>\r\n            <Error message={errorMessage} />\r\n            <Success message={successMessage}/>\r\n            \r\n            <form>\r\n                <div>\r\n                    <form>\r\n                        <div>rajaa näytettäviä <input value={exclusion} onChange={handleExclusion}/></div>\r\n                    </form>\r\n                    <h2>Lisää uusi</h2>\r\n                    <form onSubmit={addPerson}>\r\n                        <div>nimi: <input value={newName} onChange={handleNameChange} /></div>\r\n                        <div>numero: <input value={newNumber} onChange={handleNumberChange}/></div>\r\n                        <button type=\"submit\">lisää</button>\r\n                    </form>\r\n                </div>\r\n            </form>\r\n            <h2>Numerot</h2>\r\n            <div>\r\n                <Person persons={filteredSearch} remove={handleRemove} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}